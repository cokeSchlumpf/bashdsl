package com.wellnr.generator;

import java.util.List;
import org.eclipse.xtend2.lib.StringConcatenation;
import org.eclipse.xtext.xbase.lib.Conversions;
import org.eclipse.xtext.xbase.lib.Functions.Function1;
import org.eclipse.xtext.xbase.lib.Functions.Function2;
import org.eclipse.xtext.xbase.lib.IterableExtensions;
import org.eclipse.xtext.xbase.lib.ListExtensions;

@SuppressWarnings("all")
public class StringUtil {
  public String comment(final String s) {
    return this.prefix(s, "#");
  }
  
  public String echo(final String s) {
    return this.prefix(s, "echo \"");
  }
  
  public String ensureSentence(final String s) {
    String _xifexpression = null;
    boolean _or = false;
    boolean _or_1 = false;
    boolean _endsWith = s.endsWith(".");
    if (_endsWith) {
      _or_1 = true;
    } else {
      boolean _endsWith_1 = s.endsWith("!");
      _or_1 = _endsWith_1;
    }
    if (_or_1) {
      _or = true;
    } else {
      boolean _endsWith_2 = s.endsWith("?");
      _or = _endsWith_2;
    }
    if (_or) {
      _xifexpression = s;
    } else {
      _xifexpression = (s + ".");
    }
    return _xifexpression;
  }
  
  public String mkString(final List<String> strings, final String seperator) {
    final Function2<String, String, String> _function = (String seed, String string) -> {
      String _xblockexpression = null;
      {
        String result = seed;
        int _length = seed.length();
        boolean _greaterThan = (_length > 0);
        if (_greaterThan) {
          result = (result + seperator);
        }
        _xblockexpression = (result + string);
      }
      return _xblockexpression;
    };
    return IterableExtensions.<String, String>fold(strings, "", _function);
  }
  
  public String prefix(final String s, final String prefix) {
    String[] _split = s.split("\n");
    final Function1<String, String> _function = (String line) -> {
      StringConcatenation _builder = new StringConcatenation();
      _builder.append(prefix, "");
      _builder.append(" ");
      _builder.append(line, "");
      return _builder.toString();
    };
    List<String> _map = ListExtensions.<String, String>map(((List<String>)Conversions.doWrapArray(_split)), _function);
    return this.mkString(_map, "\n");
  }
  
  public String variableName(final String s) {
    String[] _split = s.split("|");
    String _last = IterableExtensions.<String>last(((Iterable<String>)Conversions.doWrapArray(_split)));
    String _replace = _last.replace("-", "");
    return _replace.toUpperCase();
  }
  
  public CharSequence variable(final String s) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("${");
    String _variableName = this.variableName(s);
    _builder.append(_variableName, "");
    _builder.append("}");
    return _builder;
  }
}
